---
title: Hello CMake
published: 2026-01-28
pinned: false
description: Comprehensive guide to CMake, the cross-platform build system
tags: [Coding]
category: Tools
licenseName: "Unlicensed"
author: FuFu
draft: true
date: 2026-01-28
pubDate: 2026-01-28
---

# Minimum CMakeLists.txt

```cmake
cmake_minimum_required(VERSION 3.5)
project (hello_cmake)
add_executable(hello_cmake main.cpp)
# Alternative: add_executable(${PROJECT_NAME} main.cpp)
```

# Processing Sources and Headers

## Default CMake Variables for Source and Build Directories

| Variable                 | Info & Default Value                                                                      |
| ------------------------ | ----------------------------------------------------------------------------------------- |
| CMAKE_SOURCE_DIR         | The root source directory where the top level CMakeLists.txt is located.                  |
| CMAKE_CURRENT_SOURCE_DIR | The current source directory where the current CMakeLists.txt is located.                 |
| PROJECT_SOURCE_DIR       | The directory where the last project() command was invoked.                               |
| CMAKE_BINARY_DIR         | The root binary / build directory. This is the directory where you ran the cmake command. |
| CMAKE_CURRENT_BINARY_DIR | The build directory you are currently in.                                                 |
| PROJECT_BINARY_DIR       | The build directory for the current project.                                              |

## Defining Sources Directories

- Source Files Variable (Not Recommended)

```cmake
# Create a sources variable with a link to all cpp files to compile
set(SOURCES
    src/Hello.cpp
    src/main.cpp
)

# Alternative using GLOB to include all cpp files in src directory
# file(GLOB SOURCES "src/*.cpp")
# Not Recommended for large projects as it may not track new files automatically

add_executable(${PROJECT_NAME} ${SOURCES})
```

- Recommended way is to list source files explicitly for better tracking and management.

```cmake
add_executable(${PROJECT_NAME}
    src/Hello.cpp
    src/main.cpp
)
```

# Defining Headers Directories

Include Directories

```cmake
target_include_directories(your_target
    PRIVATE
        ${PROJECT_SOURCE_DIR}/include
)
```

# Libraries

## Static Libraries

### Creating Static Libraries

For a simple static library structure:

```sh
.
├── CMakeLists.txt
├── include
│   └── static
│       └── Hello.h
└── src
    ├── Hello.cpp
    └── main.cpp
```

The below CMake command creates a static library from the source file (.a on Linux, .lib on Windows):

```cmake
add_library(hello_library STATIC
    src/Hello.cpp
)
# Alternative(Recommended):
# add_library(hello_library STATIC 
#     src/Hello.cpp 
#     include/static/Hello.h
# )
```

Populating Including Directories

```cmake
target_include_directories(hello_library
    PUBLIC
        ${PROJECT_SOURCE_DIR}/include
)
```

The meaning of scopes are:

- PRIVATE - the directory is added to this target’s include directories
- INTERFACE - the directory is added to the include directories for any targets that link this library.
- PUBLIC - As above, it is included in this library and also any targets that link this library. It is recommended to have your include folder be "namespaced" with sub-directories.
